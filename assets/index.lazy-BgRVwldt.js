import{r as b,j as e,c as f,z as a,g as y,u as R,a as v,B as F,C as h,b as N}from"./index-CpK2YR5i.js";import{u as S,R as q,a as C,F as w,b as o,c as i,d,e as c,I as g,f as u,g as l,t as _,C as P,h as z,i as T,j as D,k as E}from"./card-C_2CFGnz.js";const j=b.forwardRef(({className:r,...t},n)=>e.jsx("textarea",{className:f("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:n,...t}));j.displayName="Textarea";const A=a.object({name:a.string({required_error:"Name required"}).min(1,"Name required"),phone:a.coerce.number({invalid_type_error:"Phone required"}),address:a.string({required_error:"Address required"}).min(1,"Address required").max(500)}),B=a.object({created:a.number()}),I=({onSuccess:r,onError:t})=>S({mutationKey:["registartion"],mutationFn:n=>M(n),onSuccess:r,onError:t}),M=async r=>{const t={data:[{id:"INCREMENT",doorprize_number:y(),...r}]};return await new q({url:"/",data:t,method:"POST",schema:B}).sendRequest(),{data:{...r,doorprize_number:t.data[0].doorprize_number}}},k=()=>{const r=C({resolver:_(A),defaultValues:{name:"",address:"",phone:void 0}}),t=R(),{toast:n}=v(),{mutate:m,isPending:x}=I({onSuccess:s=>{n({title:"Registration Success"}),console.log("data",s.data),t({to:"/registration/success",search:{__ref:h.enc.Base64.stringify(h.enc.Utf8.parse(JSON.stringify(s.data)))}})},onError:s=>{n({variant:"destructive",title:"Oh no! Something went wrong.",description:s.message})}});function p(s){m(s)}return e.jsx(w,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(p),className:"space-y-6",children:[e.jsx(o,{control:r.control,name:"name",render:({field:s})=>e.jsxs(i,{children:[e.jsx(d,{children:"Name"}),e.jsx(c,{children:e.jsx(g,{...s})}),e.jsx(u,{children:"Please enter your name."}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"phone",render:({field:s})=>e.jsxs(i,{children:[e.jsx(d,{children:"Phone"}),e.jsx(c,{children:e.jsx(g,{type:"number",...s})}),e.jsx(u,{children:"Please enter your phone number, which will be used as your active WhatsApp number."}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"address",render:({field:s})=>e.jsxs(i,{children:[e.jsx(d,{children:"Address"}),e.jsx(c,{children:e.jsx(j,{className:"resize-none",...s})}),e.jsx(u,{children:"Please enter your address."}),e.jsx(l,{})]})}),e.jsxs(F,{type:"submit",disabled:x,children:[" ",x?"Registring...":"Register Now"]})]})})},O=()=>e.jsxs(P,{className:"",children:[e.jsxs(z,{children:[e.jsx(T,{children:"Registration Form"}),e.jsx(D,{children:"Get your door prize number by filling out the form"})]}),e.jsx(E,{children:e.jsx(k,{})})]}),G=N("/_base/")({component:O});export{G as Route};
