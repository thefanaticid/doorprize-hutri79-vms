import{d as p,z as n,a as b,e as i,j as e,B as f,b as g}from"./index-DyuoSYkc.js";import{u as N,R as v,a as y,F as C,b as F,c as k,d as D,e as S,I as z,f as w,g as P,t as R,C as d,h as l,i as m,j as h,k as u}from"./card-DzHy1Wug.js";const x=p(null),I=n.object({phone:n.coerce.number({invalid_type_error:"Phone required"})}),_=n.object({id:n.coerce.number(),name:n.string(),phone:n.coerce.number(),address:n.string(),doorprize_number:n.coerce.number()}),q=_.nullable().array(),A=({data:s,onSuccess:t,onError:o})=>N({mutationKey:["check-data",s],mutationFn:a=>M(a),onSuccess:t,onError:o}),M=async s=>await new v({url:"/search_or",data:s,schema:q}).sendRequest(),T=()=>{const s=y({resolver:R(I),defaultValues:{phone:void 0}}),{toast:t}=b(),[,o]=i(x),{mutate:a,isPending:c}=A({data:s.getValues(),onSuccess:r=>{r.length?o(r[0]):(o(null),t({variant:"destructive",title:"Uh oh! Something went wrong",description:"Your phone is not registered."}))},onError:r=>{t({variant:"destructive",title:"Uh oh! Something went wrong.",description:r.message}),console.error(r)}});function j(r){a(r)}return e.jsx(C,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(j),className:"space-y-6",children:[e.jsx(F,{control:s.control,name:"phone",render:({field:r})=>e.jsxs(k,{children:[e.jsx(D,{children:"Phone"}),e.jsx(S,{children:e.jsx(z,{type:"number",...r})}),e.jsx(w,{children:"Please enter your phone number and confirm that you are registered."}),e.jsx(P,{})]})}),e.jsxs(f,{type:"submit",disabled:c,children:[" ",c?"Check...":"Check Door Prize Information"]})]})})},B=({data:s})=>e.jsxs(d,{children:[e.jsxs(l,{children:[e.jsx(m,{children:"Doorprize information"}),e.jsx(h,{children:"Here is your door prize information."})]}),e.jsx(u,{className:"text-sm",children:e.jsx("div",{className:"grid gap-3",children:e.jsxs("dl",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Name"}),e.jsx("dd",{children:s.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Address"}),e.jsx("dd",{children:e.jsx("dd",{children:s.address})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Phone"}),e.jsx("dd",{children:e.jsx("dd",{children:s.phone})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Doorprize number"}),e.jsx("dd",{children:e.jsx("dd",{children:s.doorprize_number})})]})]})})})]}),E=()=>{const[s]=i(x);return e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(d,{className:"",children:[e.jsxs(l,{children:[e.jsx(m,{children:"Check Door Prize Number"}),e.jsx(h,{children:"Please complete the form to obtain door prize number information."})]}),e.jsx(u,{children:e.jsx(T,{})})]}),s&&e.jsx(B,{data:s})]})},O=g("/_base/check")({component:E});export{O as Route};
